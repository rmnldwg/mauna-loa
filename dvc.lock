schema: '2.0'
stages:
  clean:
    cmd: "python scripts/clean.py  -i data/raw.csv  -o data/clean.csv\n"
    deps:
    - path: data/raw.csv
      md5: 2a4a12e4f54d077989dc50def225a53e
      size: 37121
    - path: scripts/clean.py
      md5: f74f4d9b6654c970d8567de7d850f9da
      size: 1446
    outs:
    - path: data/clean.csv
      md5: a620a1895c93e4aa3e0e43d1cc73f8dc
      size: 21052
    - path: plots/mauna_loa.png
      md5: d65a0c83f0e417b4ff9d72a7b2d20f42
      size: 210369
  split:
    cmd: "python scripts/split.py -i data/clean.csv -o data -p params.yaml\n"
    deps:
    - path: data/clean.csv
      md5: a620a1895c93e4aa3e0e43d1cc73f8dc
      size: 21052
    - path: scripts/split.py
      md5: 778ff52cebd52900ce1ce704ce27ffee
      size: 1359
    params:
      params.yaml:
        split_year: 2000
    outs:
    - path: data/test.csv
      md5: 7d1e8bc8c4e8d45b200179943534763c
      size: 7364
    - path: data/train.csv
      md5: 5afcaeeb6fca23ab4954eaadd2401c28
      size: 13715
  train:
    cmd: "python scripts/train.py -i data/train.csv -o models\n"
    deps:
    - path: data/train.csv
      md5: 5afcaeeb6fca23ab4954eaadd2401c28
      size: 13715
    - path: scripts/features.py
      md5: ada59f3ff62365d7198faf23da28300d
      size: 717
    - path: scripts/train.py
      md5: 4d416b3c02c81ccb1fd87a0d8d78bea8
      size: 1895
    params:
      params.yaml:
        cycle_len: -29.0
        cycle_shift: 8
        loc: 1958.2027
        noise_precision: 10
        prior_precision: 0.1
        scale: 0.01
        season_shift: -0.08
    outs:
    - path: models/post_covmat.npy
      md5: 95db96efb381bfafc68db9c7fffd5dbb
      size: 328
    - path: models/post_mean.npy
      md5: d46d36934a4e5392f9f3245271983977
      size: 168
  eval:
    cmd: "python scripts/eval.py --data data --models models --metrics metrics.json\n"
    deps:
    - path: models/post_covmat.npy
      md5: 95db96efb381bfafc68db9c7fffd5dbb
      size: 328
    - path: models/post_mean.npy
      md5: d46d36934a4e5392f9f3245271983977
      size: 168
    - path: scripts/eval.py
      md5: 45dc7b0f0d4a0a81dd8f9e035d927dea
      size: 2083
    - path: scripts/features.py
      md5: ada59f3ff62365d7198faf23da28300d
      size: 717
    params:
      params.yaml:
        cycle_len: -29.0
        cycle_shift: 8
        loc: 1958.2027
        noise_precision: 10
        scale: 0.01
        season_shift: -0.08
    outs:
    - path: metrics.json
      md5: 8eb4338377271a9aa3cf97af665c8971
      size: 64
  plots:
    cmd: "python scripts/plots.py --data data --models models --plots plots\n"
    deps:
    - path: data/test.csv
      md5: 7d1e8bc8c4e8d45b200179943534763c
      size: 7364
    - path: data/train.csv
      md5: 5afcaeeb6fca23ab4954eaadd2401c28
      size: 13715
    - path: models/post_covmat.npy
      md5: 95db96efb381bfafc68db9c7fffd5dbb
      size: 328
    - path: models/post_mean.npy
      md5: d46d36934a4e5392f9f3245271983977
      size: 168
    outs:
    - path: plots/predictive.png
      md5: 058b6eedac6f9fb032e591e772af00e7
      size: 306926
