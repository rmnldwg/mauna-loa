schema: '2.0'
stages:
  clean:
    cmd: "python scripts/clean.py  -i data/raw.csv  -o data/clean.csv\n"
    deps:
    - path: data/raw.csv
      md5: b8b564f6b4bde7dc2d6f49d90b9df902
      size: 37077
    - path: scripts/clean.py
      md5: 1689e392b0dd0d7a4c077b5b112df3c8
      size: 1355
    outs:
    - path: data/clean.csv
      md5: 42d9ada26a353fab068cf580db2da9cf
      size: 21018
    - path: plots/mauna_loa.png
      md5: 899af42e535de36bcb5cf38a49f6d0e8
      size: 210306
  split:
    cmd: "python scripts/split.py -i data/clean.csv -o data -p params.yaml\n"
    deps:
    - path: data/clean.csv
      md5: 42d9ada26a353fab068cf580db2da9cf
      size: 21018
    - path: scripts/split.py
      md5: 778ff52cebd52900ce1ce704ce27ffee
      size: 1359
    params:
      params.yaml:
        split_year: 2000
    outs:
    - path: data/test.csv
      md5: 9e63400bb952b337f0d78be2f2a137d0
      size: 7328
    - path: data/train.csv
      md5: 23a1bb6051c215f98e8f9fbd15b82666
      size: 13717
  train:
    cmd: "python scripts/train.py -i data/train.csv -o models\n"
    deps:
    - path: data/train.csv
      md5: 23a1bb6051c215f98e8f9fbd15b82666
      size: 13717
    - path: scripts/features.py
      md5: ada59f3ff62365d7198faf23da28300d
      size: 717
    - path: scripts/train.py
      md5: 4d416b3c02c81ccb1fd87a0d8d78bea8
      size: 1895
    params:
      params.yaml:
        cycle_len: -29.0
        cycle_shift: 8
        loc: 1958.2027
        noise_precision: 10
        prior_precision: 0.1
        scale: 0.01
        season_shift: -0.08
    outs:
    - path: models/post_covmat.npy
      md5: 95db96efb381bfafc68db9c7fffd5dbb
      size: 328
    - path: models/post_mean.npy
      md5: 7f830ee1980278d0f21ae7dc7249fb9a
      size: 168
  eval:
    cmd: "python scripts/eval.py --data data --models models --metrics metrics.json\n"
    deps:
    - path: models/post_covmat.npy
      md5: 95db96efb381bfafc68db9c7fffd5dbb
      size: 328
    - path: models/post_mean.npy
      md5: 7f830ee1980278d0f21ae7dc7249fb9a
      size: 168
    - path: scripts/eval.py
      md5: 45dc7b0f0d4a0a81dd8f9e035d927dea
      size: 2083
    - path: scripts/features.py
      md5: ada59f3ff62365d7198faf23da28300d
      size: 717
    params:
      params.yaml:
        cycle_len: -29.0
        cycle_shift: 8
        loc: 1958.2027
        noise_precision: 10
        scale: 0.01
        season_shift: -0.08
    outs:
    - path: metrics.json
      md5: 511d9a3b21306ed9c5995acd33d5de08
      size: 63
  plots:
    cmd: "python scripts/plots.py --data data --models models --plots plots\n"
    deps:
    - path: data/test.csv
      md5: 9e63400bb952b337f0d78be2f2a137d0
      size: 7328
    - path: data/train.csv
      md5: 23a1bb6051c215f98e8f9fbd15b82666
      size: 13717
    - path: models/post_covmat.npy
      md5: 95db96efb381bfafc68db9c7fffd5dbb
      size: 328
    - path: models/post_mean.npy
      md5: 7f830ee1980278d0f21ae7dc7249fb9a
      size: 168
    outs:
    - path: plots/predictive.png
      md5: 5a5433c34f1ba1b688ae0286576d790c
      size: 306708
